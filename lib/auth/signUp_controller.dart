import 'package:get/get.dart';import 'dart:io';import 'package:firebase_messaging/firebase_messaging.dart';import 'package:geolocator/geolocator.dart';import 'package:shaded_app_freelancer/auth/auth_controller/auth_controller.dart';import 'package:shaded_app_freelancer/user_app/user_home.dart';class RegisterController extends GetxController {  Future<void> register(context, phone, name) async {    // Get the FCM token    String? fcmToken = await FirebaseMessaging.instance.getToken();    // Determine the device type    String deviceType = Platform.isAndroid ? 'android' : 'ios';    update();    await AuthController.registerUser(      userType: "1",      phone: phone,      fcmToken: fcmToken ?? '',      deviceType: deviceType,      name: name,    ).then(      (value) {        if (value.status) {          if (value.data != null) {            // SharedPrefController().saveUser(user: value.data);            print(value.data);            Get.offAll(UserHomeLayout());            update();          }        } else {          Get.offAll(UserHomeLayout());          context.showFailDialog(            title: 'فشل التسجيل',            content: value.message,          );          print(value.data);          update();        }      },    ).catchError(      (error) {        Get.offAll(UserHomeLayout());        print(error.data.toString());        context.showFailDialog(            title: 'فشل تسجيل الذخول', content: error.toString());        update();        // emit(Error("فشل , يرجى المحاولة"));      },    );  }  Future<void> getLocation(context) async {    await Geolocator.checkPermission();    await Geolocator.requestPermission();    Position position = await Geolocator.getCurrentPosition(        desiredAccuracy: LocationAccuracy.high);    print('Latitude: ${position.latitude}\nLongitude: ${position.longitude}');  }  @override  void onInit() {    // TODO: implement onInit    // get location    super.onInit();  }}
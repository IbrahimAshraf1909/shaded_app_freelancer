import 'package:flutter/material.dart';import 'package:flutter_svg/svg.dart';import 'package:get/get.dart';import 'package:pinput/pinput.dart';import 'package:shaded_app_freelancer/auth/login_controller.dart';import 'package:shaded_app_freelancer/auth/login_screen.dart';import 'package:shaded_app_freelancer/widget/app_services/app_text.dart';class OtpPage extends StatelessWidget {  final String phoneNumber;  final String otpCode;  final String userType;  OtpPage({    required this.phoneNumber,    required this.otpCode,    required this.userType,  });  @override  Widget build(BuildContext context) {    // LoginCubit loginController = BlocProvider.of(context, listen: false);    final loginController = Get.put(LoginController());    return Scaffold(      appBar: AppBar(        automaticallyImplyLeading: false,        toolbarHeight: 100,        leading: IconButton(            onPressed: () => Navigator.pop(context, LoginPage()),            icon: Icon(              Icons.arrow_back_ios,              size: 18,            )),        actions: [],      ),      body: Form(        key: loginController.formKey,        child: SingleChildScrollView(          child: Center(            child: Column(              crossAxisAlignment: CrossAxisAlignment.center,              mainAxisAlignment: MainAxisAlignment.center,              children: [                SvgPicture.asset('assets/images/sms-icon.svg', fit: BoxFit.cover),                SizedBox(                  height: 30,                ),                Column(                  mainAxisAlignment: MainAxisAlignment.center,                  crossAxisAlignment: CrossAxisAlignment.center,                  children: [                    Text("كود التحقق", style: tajawalArabic(size: 18, fontWeight: FontWeight.bold)),                    Text(                      "قم بإدخال كود التحقق المرسل الى الرقم \n 966$phoneNumber+",                      textAlign: TextAlign.center,                      style: tajawalArabic(size: 14),                    )                  ],                ),                SizedBox(                  height: 21,                ),                Pinput(                    validator: (pin) {                      if (pin!.isEmpty) {                        print("Empty");                        return 'رجاء أدخل رمز الOTP المرسلة لك';                      } else if (pin.length != 4) {                        print("Empty");                        return 'يجب أن تكون الأرقام 4 كحد أقصى';                      } else {                        print("Non empty");                        return null;                      }                    },                    controller: loginController.OtpController,                    onCompleted: (pin) {                      loginController.OtpController.text == pin;                      print(pin);                      print(otpCode);                      if (loginController.OtpController.text.toString().isNotEmpty) {                        if (pin == otpCode && userType == '1') {                          navTo(context, Container());                        } else if (pin == otpCode && userType == '2') {                          navTo(context, Container());                        } else {                          // errorSnackBar(msg: 'الرمز الذي أدخلته خاظئ حاول مرة اخرى');                          loginController.OtpController.text = '';                        }                      }                      print("otp is: ${loginController.OtpController.toString()}");                    },                    keyboardType: TextInputType.number,                    defaultPinTheme: PinTheme(                      width: 56,                      height: 56,                      textStyle: tajawalArabic(color: Colors.black87, size: 30),                      decoration: BoxDecoration(                        border: Border.all(color: Color.fromRGBO(253, 156, 20, 1)),                        borderRadius: BorderRadius.circular(20),                      ),                    )),                SizedBox(                  height: 25,                ),                Align(                  alignment: Alignment.topRight,                  child: Padding(                    padding: const EdgeInsets.only(right: 18.0),                    child: Row(                      crossAxisAlignment: CrossAxisAlignment.center,                      children: [                        Text("لم أستلم كود التحقق؟",                            locale: arabicLocale,                            style: tajawalArabic(color: Colors.black87, fontWeight: FontWeight.bold),                            textAlign: TextAlign.start),                        TextButton(                            onPressed: () {},                            child: Text("يرجى إعادة الإرسال",                                style: tajawalArabic(color: Color.fromRGBO(253, 156, 20, 1)), textAlign: TextAlign.start, locale: arabicLocale)),                      ],                    ),                  ),                ),                const SizedBox(                  height: 80,                ),                Center(                  child: buildButton(                      function: () {                        if (loginController.OtpController.text.toString().isNotEmpty) {                          // if (OtpController == otp && userType == '1') {                          //   navTo(context, UserHomePage());                          // } else if (OtpController == otp && userType == '2') {                          //   navTo(context, CaptainHomePage());                          // }                        }                      },                      name: "تحقق",                      colorName: Colors.white,                      color: const Color.fromRGBO(0, 210, 127, 1)),                ),                const SizedBox(                  height: 100,                )              ],            ),          ),        ),      ),    );  }}